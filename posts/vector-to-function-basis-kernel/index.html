
 <!DOCTYPE HTML>
<html lang="EN">
<head>
  <meta charset="UTF-8">
  
    <title>From Vector to Function — Transformations, Basis, and Kernel Method | Green Sky</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Song, Changyue">
    
    <meta name="description" content="Here is only some superficial thought about Fourier transformation (and other similar transformations), space basis, and kernel method. I will continu">
    
    
    <meta name="description" content="Here is only some superficial thought about Fourier transformation (and other similar transformations), space basis, and kernel method. I will continuously update the post for new thoughts.
1. What i">
<meta property="og:type" content="article">
<meta property="og:title" content="From Vector to Function — Transformations, Basis, and Kernel Method">
<meta property="og:url" content="http://songcy.net/posts/vector-to-function-basis-kernel/">
<meta property="og:site_name" content="Green Sky">
<meta property="og:description" content="Here is only some superficial thought about Fourier transformation (and other similar transformations), space basis, and kernel method. I will continuously update the post for new thoughts.
1. What i">
<meta property="og:image" content="../../post-attachments/2/Signal_Sampling.png">
<meta property="og:image" content="../../post-attachments/2/1000px-Dot_Product.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="From Vector to Function — Transformations, Basis, and Kernel Method">
<meta name="twitter:description" content="Here is only some superficial thought about Fourier transformation (and other similar transformations), space basis, and kernel method. I will continuously update the post for new thoughts.
1. What i">


    
    <link rel="alternative" href="/atom.xml" title="Green Sky" type="application/atom+xml">
    
    
    <link rel="icon" href="/images/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/images/frontpage.jpg">
    <link rel="apple-touch-icon-precomposed" href="/images/frontpage.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

	<link rel="stylesheet" href="/css/flexslider.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		<div id="mailboxbar">
			<span><a class="icon-envelope-alt" href="mailto:songcy08@qq.com"> songcy08@qq.com</a></span>
		</div>
		
			<div id="imglogo">
				<a href="/"><img src="/images/author.jpg" alt="Green Sky" title="Green Sky"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a id="blue-site-name" href="/" title="Green Sky">Green Sky</a></h1>
				<h2 class="blog-motto">Welcome to Changyue Song&#39;s Homepage</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav id="animated">
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/academy">Academy</a></li>
					
						<li><a href="/favorites">Favorites</a></li>
					
						<li><a href="/travel">Travel</a></li>
					
						<li><a href="/posts">Posts</a></li>
					
						<li><a href="/leave-a-message">Leave a message</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:songcy.net">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/posts/vector-to-function-basis-kernel/" title="From Vector to Function — Transformations, Basis, and Kernel Method" itemprop="url">From Vector to Function — Transformations, Basis, and Kernel Method</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://songcy.net/about" title="Song, Changyue" target="_blank" itemprop="author">Song, Changyue</a>
		
  <p class="article-time">
    <time datetime="2014-10-10T22:00:00.000Z" itemprop="datePublished"> Published 2014-10-11</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#what-is-function"><span class="toc-text">1. What is function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#function-inner-product"><span class="toc-text">2. Function inner product</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#basis"><span class="toc-text">3. Basis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#example-transformations"><span class="toc-text">4. Example: Transformations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kernel-function"><span class="toc-text">5. Kernel Function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#example-transformations-1"><span class="toc-text">6. Example: Transformations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#something-about-kernel-method"><span class="toc-text">7. Something about Kernel Method</span></a></li></ol>
		
		</div>
		
		<p>Here is only some superficial thought about Fourier transformation (and other similar transformations), space basis, and kernel method. I will continuously update the post for new thoughts.</p>
<h2 id="what-is-function">1. What is function</h2>
<p>A function is an infinite vector. Every thought begins here. As the following figure shows</p>
<center>
<a href="../../post-attachments/2/Signal_Sampling.png"><img src="../../post-attachments/2/Signal_Sampling.png" alt="source: http://en.wikipedia.org/wiki/Sampling_(signal_processing)" width="379" height="246"></a>
</center>
<p>For a function defined on the interval <span class="math">\([a,b]\)</span>, we take samples by an interval <span class="math">\(\Delta x\)</span>. If we sample the function <span class="math">\(f(x)\)</span> at points <span class="math">\(a, x_1,\cdots,x_n,b\)</span>, then we can transform the function into a vector <span class="math">\((f(a),f(x_1),\cdots,f(x_n),f(b))^T\)</span>. When <span class="math">\(\Delta x\rightarrow 0\)</span>, the vector should be more and more close to the function and at last, it becomes infinite.</p>
<p>The above analysis assumes <span class="math">\(x\)</span> to be a real number. But when <span class="math">\(x\)</span> is a vector, it still holds. From now on, we use bold font such as <span class="math">\(\mathbf{x}\)</span> to denote normal vector in <span class="math">\(\mathcal{R}^n\)</span> space; use <span class="math">\(f\)</span> to denote the function itself, namely the infinite vector; use <span class="math">\(f(\mathbf{x})\)</span> to denote the evaluation of the function at point <span class="math">\(\mathbf{x}\)</span>. And the evaluation of a function should be a real number.</p>
<h2 id="function-inner-product">2. Function inner product</h2>
<p>Vectors have inner product. For vector <span class="math">\(\mathbf{x}=(x_1,\cdots,x_n)\)</span> and <span class="math">\(\mathbf{y}=(y_1, \cdots, y_n)\)</span>, the inner product of <span class="math">\(\mathbf{x}\)</span> and <span class="math">\(\mathbf{y}\)</span> is defined as <span class="math">\[
    &lt;\mathbf{x},\mathbf{y}&gt;=\sum_{i=1}^n x_i y_i
\]</span> Similarly, functions have inner product. For two functions <span class="math">\(latex f\)</span> and <span class="math">\(latex g\)</span> sampling by interval <span class="math">\(latex \Delta x\)</span>, the inner product may be defined as <span class="math">\[
    &lt;f,g&gt;=\lim_{\Delta x\rightarrow 0}\sum_{i} f(x_i) g(x_i)
\]</span> at first thought. However, the above equation doesn’t converge when <span class="math">\(\Delta x\rightarrow 0\)</span>. Something is missing. As <span class="math">\(x\)</span> approaches 0, the dimension of <span class="math">\(f\)</span> and <span class="math">\(g\)</span> grows larger in our denotation.</p>
<p>For a vector, the dimension is discrete. We only have the first, second,… dimension. But we don’t have the 0.5, 1.5,… dimension. When we transform a function into a vector, every sample point is located at a discrete dimension. However, this should not be true, since the dimension of each sample point should be stable so that the above equation will converge. Therefore, the dimension is not discrete for functions, but continuous. What we miss is the difference between adjacent dimensions for normalization. Therefore, we can define the inner product of two functions as <span class="math">\[
    &lt;f,g&gt;=\lim_{\Delta x\rightarrow 0}\sum_{i} f(x_i) g(x_i)\Delta x=\int f(x)g(x)dx
\]</span></p>
<h2 id="basis">3. Basis</h2>
<p>What is the meaning of inner product? For two vectors <span class="math">\(A\)</span> and <span class="math">\(B\)</span>, the inner product is the projection of one vector to the other.</p>
<center>
<a href="../../post-attachments/2/1000px-Dot_Product.png"><img src="../../post-attachments/2/1000px-Dot_Product.png" alt="" width="250" height="200"></a>
</center>
<p><span class="math">\[
    &lt;A,B&gt;=|A||B|\cos\theta
\]</span> Namely <span class="math">\[
    \mathrm{projection}(A) = \frac{&lt;A,B&gt;}{|B|^2} B
\]</span> If we regard the length of <span class="math">\(B\)</span> as one unit, then the inner product is the coordinate of the projection on <span class="math">\(B\)</span>. Therefore, given a set of orthogonal basis vector <span class="math">\(\{\mathbf{e}_i\}_{i=1}^n\)</span> where <span class="math">\(&lt;\mathbf{e}_i,\mathbf{e}_j&gt;=0\)</span> and <span class="math">\(|\mathbf{e}_i|=1\)</span>. The basis vectors can establish a space by linear operations. Any vector <span class="math">\(\mathbf{x}\)</span> in the space can be denoted as <span class="math">\[
    \mathbf{x}=\sum_{i=1}^n &lt;\mathbf{x},\mathbf{e}_i&gt; \cdot \mathbf{e_i}
\]</span> More generally, if <span class="math">\(|\mathbf{e}_i| \neq 1\)</span>, then <span class="math">\[
    \mathbf{x}=\sum_{i=1}^n \frac{&lt;\mathbf{x},\mathbf{e}_i&gt;}{|\mathbf{e}_i|^2} \mathbf{e}_i=\sum_{i=1}^n \frac{&lt;\mathbf{x},\mathbf{e}_i&gt;}{&lt;\mathbf{e}_i,\mathbf{e}_i&gt;} \mathbf{e}_i
\]</span> Functions also have basis, which can be orthogonal or non-orthogonal. If we define the set of function basis, any function in the space can also be decomposed into the combination of several basis functions. Function inner product can also be used to calculate the coefficient on any specific basis. However, since the dimension of function is continuous, there may be infinite basis functions.</p>
<p>For a set of function basis <span class="math">\(\{h_i\}\)</span>, if <span class="math">\(&lt;h_i,h_j&gt;=0\)</span> and <span class="math">\(|h_i|=1\)</span>, any function within the space can be denoted as <span class="math">\[
    f=\sum &lt;f,h_i&gt; \cdot h_i=\sum_i \int f(x)h_i(x)dx \cdot h_i
\]</span> If <span class="math">\(|h_i| \neq 1\)</span>, <span class="math">\[
    f=\sum_i \frac{&lt;f,h_i&gt;}{&lt;h_i,h_i&gt;} h_i
\]</span> similar to the vector case.</p>
<h2 id="example-transformations">4. Example: Transformations</h2>
<p>Let the basis functions <span class="math">\(\{h_p\}, (p\)</span> is interger) be <span class="math">\[
    h_p(x)=e^{i2\pi p x/T}
\]</span> defined on interval <span class="math">\([0, T]\)</span>. Here I use <span class="math">\(p\)</span> to index the basis functions in order to distinguish from the imaginary number <span class="math">\(i\)</span>. These construct a space and any function defined on interval <span class="math">\([0, T]\)</span> is within the space. It can be proven that any two basis function are orthogonal (for complex numbers, the latter term should take conjugate transpose when calculating the inner product). <span class="math">\[
    &lt;h_p, h_q&gt;=\int_0^T h_p (x) \bar{h_q(x)} dx=\int_0^T e^{i2\pi p x/T} e^{-i2\pi q x/T} dx=0
\]</span> where <span class="math">\(p \neq q\)</span> and <span class="math">\(\bar{a+bi}=a-bi\)</span>. The “length” of basis is <span class="math">\[
    |h_p|^2=&lt;h_p,h_p&gt;=T
\]</span> If a function <span class="math">\(latex f\)</span> defined on interval <span class="math">\([0,T]\)</span> is within the space, it can be written as <span class="math">\[
    f(x)=\sum_p c_p h_p(x)=\sum_p c_p e^{i2\pi px/T}
\]</span> And the coefficient can be calculated as <span class="math">\[
    c_p=\frac{&lt;f,h_p&gt;}{|h_p|^2}=\frac{1}{T} \int_0^T f(x)\bar{h_p(x)}dx=\frac{1}{T} \int_0^T f(x) e^{-i2\pi p x} dx
\]</span> Actually this is the Fourier series. A more thorough discussion about Fourier series can be found <a href="http://www.thefouriertransform.com/" target="_blank" rel="external">here</a>.</p>
<h2 id="kernel-function">5. Kernel Function</h2>
<p>Instead of <span class="math">\(i\)</span>, we use <span class="math">\(y\)</span> to index the basis function. Let <span class="math">\[
    K(x,y)=h_y(x)
\]</span> The set of basis functions can be denoted as one function with two parameters. In the example, <span class="math">\(y\)</span> is discrete. However, this is not the full space. If we let <span class="math">\(y\)</span> to be real number, then any functions may be represented.</p>
<p>The function <span class="math">\(K(x,y)\)</span> is kernel function. It may be viewed as a cluster of basis functions. If they are orthogonal <span class="math">\(&lt;K(\cdot,y_1),K(\cdot,y_2)&gt;=0\)</span> for any <span class="math">\(y_1 \neq y_2\)</span>, and the squared “length” of basis <span class="math">\(|K(\cdot,y)|^2=\int 1 dx\)</span>, any function <span class="math">\(f\)</span> can be represented as <span class="math">\[
    f=\int F(y)K(\cdot,y) dy
\]</span> And the coefficient of a function <span class="math">\(f\)</span> on a basis <span class="math">\(K(\cdot,y)\)</span> is calculated as <span class="math">\[
    F(y)=&lt;f,K(\cdot,y)&gt;=\int f(x)K(x,y)dx
\]</span> Therefore, kernel function is able to transform a function into another space (a function space).</p>
<h2 id="example-transformations-1">6. Example: Transformations</h2>
<p>Let the kernel function to be <span class="math">\[
    K(x,y)=e^{i2\pi xy}
\]</span> where <span class="math">\(i\)</span> is the imaginary number. It is easy to show that the basis functions are mutual orthogonal, <span class="math">\[
    &lt;K(\cdot,y_1),K(\cdot,y_2)&gt;=\int K(x,y_1) \bar{K(x,y_2)}dx=\int e^{i2\pi xy_1}e^{-i2\pi xy_2}dx=0
\]</span> when <span class="math">\(y_1 \neq y_2\)</span>. Then squared “length” of basis is <span class="math">\[
    &lt;K(\cdot,y),K(\cdot,y)&gt;=\int K(x,y)\bar{K(x,y)} dx=\int 1 dx
\]</span> This constitutes a full function space. The coefficient is calculated as <span class="math">\[
    F(y)=&lt;f,K(\cdot ,y)&gt;=\int f(x) \bar{K(x,y)} dx=\int f(x)e^{-i2\pi xy}dx
\]</span> The original function is represented as <span class="math">\[
    f(x)=\int F(y) K(x,y) dy=\int F(y) e^{i2\pi xy}dy
\]</span> Actually this is the Fourier transformation. Other transformations such as Laplace transformation, Z-transformation are similar. Maybe wavelet is also within the framework.</p>
<h2 id="something-about-kernel-method">7. Something about Kernel Method</h2>
<p>For a kernel function <span class="math">\(K(x,y)\)</span>, if we regard it as a cluster of basis, then we can get a space by the linear combination of the basis. However, the basis may not be orthogonal. This is somewhat like a matrix <span class="math">\(P\)</span>, if we use the columns of <span class="math">\(P\)</span> to generate a space. To construct orthogonal basis for the space, we can use eigen value and eigen vectors of <span class="math">\(P\)</span>. Similarly, we can use eigenfunctions as the basis for the function space generated by <span class="math">\(K(x,y)\)</span>. If all the eigen values are positive, then the kernel function is positive. If the inner product is defined as <span class="math">\[
    &lt;K(\cdot,x), K(\cdot,y)&gt;=K(x,y)
\]</span> This is the reproducing kernel Hilbert space. It is commonly used to calculate the inner product of two mappings in a high-dimension feature space. When linear model is not enough, we can map the points into feature space and use kernel trick to calculate inner product. Support Vector Machine is an example.</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/academic-theory/">academic theory</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Fourier-transform/">Fourier transform</a><a href="/tags/function-basis/">function basis</a><a href="/tags/kernel-method/">kernel method</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://songcy.net/posts/vector-to-function-basis-kernel/" data-title="From Vector to Function — Transformations, Basis, and Kernel Method | Green Sky" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/posts/summary-of-state-space-models/" title="A Summary of State-space Models">
  <strong>上一篇：</strong><br/>
  <span>
  A Summary of State-space Models</span>
</a>
</div>


<div class="next">
<a href="/posts/introduction-about-hadoop-concepts/"  title="A Preliminary Introduction about Hadoop — Concepts and Ideas">
 <strong>下一篇：</strong><br/> 
 <span>A Preliminary Introduction about Hadoop — Concepts and Ideas
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="posts/vector-to-function-basis-kernel/" data-title="From Vector to Function — Transformations, Basis, and Kernel Method" data-url="http://songcy.net/posts/vector-to-function-basis-kernel/"></div>
</section>


<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#what-is-function"><span class="toc-text">1. What is function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#function-inner-product"><span class="toc-text">2. Function inner product</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#basis"><span class="toc-text">3. Basis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#example-transformations"><span class="toc-text">4. Example: Transformations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kernel-function"><span class="toc-text">5. Kernel Function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#example-transformations-1"><span class="toc-text">6. Example: Transformations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#something-about-kernel-method"><span class="toc-text">7. Something about Kernel Method</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/academic-practice/" title="academic practice">academic practice<sup>1</sup></a></li>
		
			<li><a href="/categories/academic-theory/" title="academic theory">academic theory<sup>3</sup></a></li>
		
			<li><a href="/categories/others/" title="others">others<sup>1</sup></a></li>
		
			<li><a href="/categories/technique/" title="technique">technique<sup>2</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			<li><a href="/tags/Fourier-transform/" title="Fourier transform">Fourier transform<sup>2</sup></a></li>
		
			<li><a href="/tags/particle-filter/" title="particle filter">particle filter<sup>1</sup></a></li>
		
			<li><a href="/tags/Battle-City/" title="Battle City">Battle City<sup>1</sup></a></li>
		
			<li><a href="/tags/visual-object-tracking/" title="visual object tracking">visual object tracking<sup>1</sup></a></li>
		
			<li><a href="/tags/MapReduce/" title="MapReduce">MapReduce<sup>1</sup></a></li>
		
			<li><a href="/tags/HDFS/" title="HDFS">HDFS<sup>1</sup></a></li>
		
			<li><a href="/tags/big-data/" title="big data">big data<sup>1</sup></a></li>
		
			<li><a href="/tags/power-spectral/" title="power spectral">power spectral<sup>1</sup></a></li>
		
			<li><a href="/tags/kernel-method/" title="kernel method">kernel method<sup>1</sup></a></li>
		
			<li><a href="/tags/function-basis/" title="function basis">function basis<sup>1</sup></a></li>
		
			<li><a href="/tags/Bayesian-filter/" title="Bayesian filter">Bayesian filter<sup>1</sup></a></li>
		
			<li><a href="/tags/state-space-model/" title="state-space model">state-space model<sup>1</sup></a></li>
		
			<li><a href="/tags/ARMA/" title="ARMA">ARMA<sup>1</sup></a></li>
		
			<li><a href="/tags/periodogram/" title="periodogram">periodogram<sup>1</sup></a></li>
		
			<li><a href="/tags/wordpress/" title="wordpress">wordpress<sup>1</sup></a></li>
		
			<li><a href="/tags/Hadoop/" title="Hadoop">Hadoop<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://kaibo.ie.wisc.edu" target="_blank" title="Prof. Liu, Kaibo">Prof. Liu, Kaibo</a>
            
          </li>
        
          <li>
            
            	<a href="http://silentvally.com" target="_blank" title="Liu, Tao">Liu, Tao</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.xueningzhu.com/" target="_blank" title="Zhu, Xuening">Zhu, Xuening</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Pacman">Jacman</a> © 2015 
		
		<a href="http://songcy.net" target="_blank" title="Song, Changyue">Song, Changyue</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"songcy"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 


<script type="text/javascript">

var disqus_shortname = 'songcy';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/images/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

  <!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>
