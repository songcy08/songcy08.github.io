
 <!DOCTYPE HTML>
<html lang="EN">
<head>
  <meta charset="UTF-8">
  
    <title>Elements of Frequency-domain Analysis | Green Sky</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Song, Changyue">
    
    <meta name="description" content="1. Introduction
Frequency-domain analysis is a commonly used technique in signal processing. For example, in heart rate variation (HRV) analysis, hig">
    
    
    <meta name="description" content="1. Introduction
Frequency-domain analysis is a commonly used technique in signal processing. For example, in heart rate variation (HRV) analysis, high frequency (HF) and low frequency (LF) components">
<meta property="og:type" content="article">
<meta property="og:title" content="Elements of Frequency-domain Analysis">
<meta property="og:url" content="http://songcy.net/posts/elements-frequency-domain-analysis/">
<meta property="og:site_name" content="Green Sky">
<meta property="og:description" content="1. Introduction
Frequency-domain analysis is a commonly used technique in signal processing. For example, in heart rate variation (HRV) analysis, high frequency (HF) and low frequency (LF) components">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Elements of Frequency-domain Analysis">
<meta name="twitter:description" content="1. Introduction
Frequency-domain analysis is a commonly used technique in signal processing. For example, in heart rate variation (HRV) analysis, high frequency (HF) and low frequency (LF) components">


    
    <link rel="alternative" href="/atom.xml" title="Green Sky" type="application/atom+xml">
    
    
    <link rel="icon" href="/images/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/images/frontpage.jpg">
    <link rel="apple-touch-icon-precomposed" href="/images/frontpage.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

	<link rel="stylesheet" href="/css/flexslider.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		<div id="mailboxbar">
			<span><a class="icon-envelope-alt" href="mailto:songcy08@qq.com"> songcy08@qq.com</a></span>
		</div>
		
			<div id="imglogo">
				<a href="/"><img src="/images/author.jpg" alt="Green Sky" title="Green Sky"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a id="blue-site-name" href="/" title="Green Sky">Green Sky</a></h1>
				<h2 class="blog-motto">Welcome to Changyue Song&#39;s Homepage</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav id="animated">
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/academy">Academy</a></li>
					
						<li><a href="/favorites">Favorites</a></li>
					
						<li><a href="/travel">Travel</a></li>
					
						<li><a href="/posts">Posts</a></li>
					
						<li><a href="/leave-a-message">Leave a message</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:songcy.net">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/posts/elements-frequency-domain-analysis/" title="Elements of Frequency-domain Analysis" itemprop="url">Elements of Frequency-domain Analysis</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://songcy.net/about" title="Song, Changyue" target="_blank" itemprop="author">Song, Changyue</a>
		
  <p class="article-time">
    <time datetime="2015-01-16T16:00:00.000Z" itemprop="datePublished"> Published 2015-01-17</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#introduction"><span class="toc-text">1. Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fourier-transform"><span class="toc-text">2. Fourier Transform</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#energy-spectrum-and-power-spectrum"><span class="toc-text">3. Energy Spectrum and Power Spectrum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#stationary-stochastic-process"><span class="toc-text">4. Stationary Stochastic Process</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#power-spectrum-estimation"><span class="toc-text">5. Power Spectrum Estimation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#some-comments"><span class="toc-text">6. Some Comments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for-more-information"><span class="toc-text">For more information</span></a></li></ol>
		
		</div>
		
		<h2 id="introduction">1. Introduction</h2>
<p>Frequency-domain analysis is a commonly used technique in signal processing. For example, in heart rate variation (HRV) analysis, high frequency (HF) and low frequency (LF) components are usually extracted from RR intervals based on power spectral analysis. As an industrial engineering, I am not familiar with this area, but I need this tool in my research. Although a lot of open-source software/libraries are available, I think it still necessary to understand what is going on. Therefore, I spent some time in frequency-domain analysis and make a little summary here.</p>
<h2 id="fourier-transform">2. Fourier Transform</h2>
<p>Fourier transform is the basis of frequency-domain analysis. Fourier transform maps a signal from time domain to frequency domain. There are four kinds of Fourier transforms:</p>
<ul>
<li>Fourier series: <span class="math">\[ X(k)=\frac{1}{T} \int_0^T x(t) e^{-j2\pi k t/T} dt \]</span></li>
<li>Discrete-time Fourier transform: <span class="math">\[ X(f)=\sum_{n=-\infty}^{\infty} x(n) e^{-j2\pi fn} \]</span></li>
<li>Continuous-time Fourier transform: <span class="math">\[ X(f)=\int_{-\infty}^{\infty} x(t) e^{-j2\pi ft}dt \]</span></li>
<li>Discrete Fourier transform: <span class="math">\[ X(k)=\sum_{n=0}^{N-1} x(n) e^{-j2\pi kn/N} \]</span></li>
</ul>
<p>Each kind of Fourier transform has its inverse Fourier transform, which reconstruct the original signal based on the frequency components.</p>
<p>Take Fourier series as an example. It can be shown that any periodic function <span class="math">\(x(t)\)</span> can be represented as linear combination of <span class="math">\(\cos(2\pi m t/T)\)</span> and <span class="math">\(\sin(2\pi n t/T)\)</span>, where <span class="math">\(T\)</span> is the period of <span class="math">\(x(t)\)</span>, i.e. $ x(t+T)=x(t) $ for any <span class="math">\(t\)</span>, and <span class="math">\(m,n\)</span> are integers, <span class="math">\[
    x(t)=\sum_{m=0}^{\infty} a_m \cos(2\pi mt/T) + \sum_{n=1}^{\infty} b_n \sin(2\pi nt/T)
\]</span> Here <span class="math">\(a_m\)</span> and <span class="math">\(b_n\)</span> are real numbers. According to Euler’s formula <span class="math">\[
    e^{jx}=\cos x + j \sin x
\]</span> where <span class="math">\(j=\sqrt{-1}\)</span>, then we get <span class="math">\[
    x(t)=\sum_{k=-\infty}^{\infty} X(k) e^{j2\pi k t/T}
\]</span> Now <span class="math">\(x(t)\)</span> is represented by a linear combination of <span class="math">\(e^{j2\pi k t/T}\)</span>, and <span class="math">\(X(k)\)</span> are the coefficients (complex numbers), <span class="math">\(k\)</span> is integer. Recall the Euler’s formula, <span class="math">\(e^{j2\pi k t/T}\)</span> has period <span class="math">\(T/k\)</span> or frequency <span class="math">\(k/T\)</span>. Thus <span class="math">\(x(t)\)</span> has been discomposited into combination of components in different frequency! It can be shown that the coefficient <span class="math">\(X(k)\)</span> can be calculated as <span class="math">\[
    X(k)=\frac{1}{T} \int_0^T x(t) e^{-j2\pi k t/T} dt
\]</span> This equation is Fourier series. Therefore, Fourier series calculates the coefficients for each frequency component. And the previous equation is inverse Fourier series, which reconstruct the original time-domain signal based on the coefficients of frequency components.</p>
<p>Other kinds of Fourier transforms are similar. And the characteristics of each Fourier transform are listed in the following table.</p>
<table>
<tr>
<th style="text-align:center;border:1px solid">
 
</th>
<th colspan="2" style="text-align:center;border:1px solid">
Time domain
</th>
<th colspan="2" style="text-align:center;border:1px solid">
Frequency domain
</th>
</tr>
<tr>
<td style="text-align:center;border:1px solid">
Fourier series
</td>
<td style="text-align:center;border:1px solid">
continuous
</td>
<td style="text-align:center;border:1px solid">
periodic
</td>
<td style="text-align:center;border:1px solid">
discrete
</td>
<td style="text-align:center;border:1px solid">
nonperiodic
</td>
</tr>
<tr>
<td style="text-align:center;border:1px solid">
Discrete-time Fourier transform
</td>
<td style="text-align:center;border:1px solid">
discrete
</td>
<td style="text-align:center;border:1px solid">
nonperiodic
</td>
<td style="text-align:center;border:1px solid">
continuous
</td>
<td style="text-align:center;border:1px solid">
periodic
</td>
</tr>
<tr>
<td style="text-align:center;border:1px solid">
Continuous-time Fourier transform
</td>
<td style="text-align:center;border:1px solid">
continuous
</td>
<td style="text-align:center;border:1px solid">
nonperiodic
</td>
<td style="text-align:center;border:1px solid">
continuous
</td>
<td style="text-align:center;border:1px solid">
nonperiodic
</td>
</tr>
<tr>
<td style="text-align:center;border:1px solid">
Discrete Fourier transform
</td>
<td style="text-align:center;border:1px solid">
discrete
</td>
<td style="text-align:center;border:1px solid">
periodic
</td>
<td style="text-align:center;border:1px solid">
discrete
</td>
<td style="text-align:center;border:1px solid">
periodic
</td>
</tr>
</table>
<p>For example, Fourier series takes a continuous periodic function <span class="math">\(x(t)\)</span> as input, and produces discrete non-periodic coefficients <span class="math">\(X(k)\)</span> as output. The table shows something interesting. Discrete in one domain always related to periodic in the other domain, while continuous in one domain always related to nonperiodic in the other domain.</p>
<p>Since digital signals are stored in discrete values in computer, discrete-time Fourier transform (DTFT) and discrete Fourier transform (DFT) are more commonly used. DTFT takes discrete nonperiodic signal as input, and produces its frequency components as continuous periodic series. DFT takes discrete periodic signal as input, and produces its frequency components as a discrete periodic signal. If some conditions are satisfied, e.g. <span class="math">\(N=2^n\)</span>, fast Fourier transform (FFT) algorithms can be employed to calculate DFT efficiently.</p>
<p>Fourier transform can be considered from the point of view <a href="http://songcy.net/posts/vector-to-function-basis-kernel/" title="function basis and kernel method" target="_blank" rel="external">function basis and kernel method</a>, which is the concern of my another article.</p>
<p>There are other transforms such as z-transform and Laplace transform. They have very similar form with Fourier transform. For example, in z-transform <span class="math">\[
    X(z)=\sum_{n=-\infty}^{\infty} x(n) z^{-n}
\]</span> Here <span class="math">\(z\)</span> is a complex number. Let <span class="math">\[
    z=e^{jw}
\]</span> we get DTFT.</p>
<h2 id="energy-spectrum-and-power-spectrum">3. Energy Spectrum and Power Spectrum</h2>
<p>Energy spectrum is defined as the energy on a specific frequency <span class="math">\[
    S_x (f) = |X(f)|^2
\]</span> If we sum up or integrate the energy spectrum over <span class="math">\((-\infty, \infty)\)</span> for Fourier series and continuous Fourier series, and over <span class="math">\([-1, 1]\)</span> for DFT and DTFT, we can get the total energy.</p>
<p>However, sometimes a signal does not have Fourier transform (continuous Fourier transform or DTFT), i.e. <span class="math">\(|X(f)|\)</span> go to infinity, we define power spectrum as the $ S_x (f)$ divided by the integral interval of Fourier transform. <span class="math">\[
    R_x (f)=\lim_{T \rightarrow \infty} \frac{1}{2T} |\mathcal{F} (x)|^2
\]</span> Here <span class="math">\(\mathcal{F} (x)\)</span> applies Fourier transform to <span class="math">\(x(t)\)</span> over <span class="math">\([-T, T]\)</span> at frequency <span class="math">\(f\)</span>. It can be shown that <span class="math">\(R_x (f)\)</span> can be calculated as the Fourier transform of <span class="math">\(r_x(\tau)\)</span> <span class="math">\[
    R_x (f)=\mathcal{F} (r_x(\tau))
\]</span> where <span class="math">\[
    r_x(\tau)=\lim_{T \rightarrow \infty} \frac{1}{2T} \int_{-T}^T x(t+\tau) x(t) dt
\]</span></p>
<h2 id="stationary-stochastic-process">4. Stationary Stochastic Process</h2>
<p>Until now we are talking about deterministic signals, i.e. <span class="math">\(x(t)\)</span> is a specific function of <span class="math">\(t\)</span>. Sometimes it is necessary to consider stochastic process, i.e. <span class="math">\(x_t\)</span> is a random variable. Here I use subscript to distinguish stochastic process from deterministic signal.</p>
<p>For a stochastic process <span class="math">\(x_1, x_2, \cdots, x_N\)</span>, if the correlation between any two variables depends only on the difference in time <span class="math">\[
    Cor(x_{n+k}, x_n)=Cor(x_{1+k},x_1)=r(k)
\]</span> for any <span class="math">\(n\)</span>, and the expected value is certain <span class="math">\[
    E(x_n)=\mu
\]</span> The stochastic process is weakly stationary or wide-sense stationary (WSS).</p>
<p>For WSS process, we cannot apply Fourier transform to the original series directly since they are random numbers. But we can apply Fourier transform to its autocorrelation function <span class="math">\(r(k)\)</span>. Recall Section 3, <span class="math">\[
    r_x(k)=\lim_{T \rightarrow \infty} \frac{1}{N} \sum_{0}^{N-1} x(t+k) x(t) dt
\]</span> is the autocorrelation for WSS process with zero mean and variance 1 (for other WSS process, it will be proportional). The resulting value <span class="math">\[
    R_x (f)=\mathcal{F} (r_k)
\]</span> is the power spectrum.</p>
<h2 id="power-spectrum-estimation">5. Power Spectrum Estimation</h2>
<p>Power spectrum is calculated as the Fourier transform of the autocorrelation function (ACF). However, in practice, the series is usually not infinite, and we rarely know the true ACF. Thus we need to estimate power spectrum. There are two categories of methods for power spectrum estimation: non-parametric method and parametric method.</p>
<p>In non-parametric method, ACF is estimated directly by data. Periodogram is a non-parametric estimation, where <span class="math">\[
    \hat{r}(k)=\frac{1}{N} \sum_{n=0}^{N-1-k} x(n)x(n+k)
\]</span> here <span class="math">\(N\)</span> is the length of the signal. It is equivalent to the ACF of an infinite series <span class="math">\(y(n)\)</span> where <span class="math">\(y(n)=x(n)\)</span> when <span class="math">\(n=0,1,\cdots,N-1\)</span> and <span class="math">\(y(n)=0\)</span> for other <span class="math">\(n\)</span>.</p>
<p>In parametric method, a model, e.g. autoregressive moving average (ARMA) model, is fitted at first. Then the ACF can be calculated.</p>
<h2 id="some-comments">6. Some Comments</h2>
<p>The constraint in power spectrum analysis is that the process should be stationary. However, in a lot of situations, this assumption is not satisfied. Furthermore, power spectrum analysis need a long series of data to obtain good estimation. Therefore, maybe state-space model is a better choice in a number of situations.</p>
<h2 id="for-more-information">For more information</h2>
<p>About ARMA model:</p>
<ul>
<li>Cryer, J. D., &amp; Chan, K. S. (2008). <em>Time series analysis: with applications in R</em>. Springer.</li>
</ul>
<p>About Fourier transform:</p>
<ul>
<li><a href="http://www.thefouriertransform.com/" class="uri" target="_blank" rel="external">http://www.thefouriertransform.com/</a></li>
</ul>
<p>About power spectrum:</p>
<ul>
<li>Hayes, M. H. (2009). <em>Statistical digital signal processing and modeling</em>. John Wiley &amp; Sons.</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/academic-theory/">academic theory</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Fourier-transform/">Fourier transform</a><a href="/tags/power-spectral/">power spectral</a><a href="/tags/periodogram/">periodogram</a><a href="/tags/ARMA/">ARMA</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://songcy.net/posts/elements-frequency-domain-analysis/" data-title="Elements of Frequency-domain Analysis | Green Sky" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/posts/here-comes-iera/" title="Here comes IERA!">
  <strong>上一篇：</strong><br/>
  <span>
  Here comes IERA!</span>
</a>
</div>


<div class="next">
<a href="/posts/visual-tracking-tanks-in-battle-city/"  title="Visual Tracking of Tanks in Battle City Using Particles Filters">
 <strong>下一篇：</strong><br/> 
 <span>Visual Tracking of Tanks in Battle City Using Particles Filters
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="posts/elements-frequency-domain-analysis/" data-title="Elements of Frequency-domain Analysis" data-url="http://songcy.net/posts/elements-frequency-domain-analysis/"></div>
</section>


<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#introduction"><span class="toc-text">1. Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fourier-transform"><span class="toc-text">2. Fourier Transform</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#energy-spectrum-and-power-spectrum"><span class="toc-text">3. Energy Spectrum and Power Spectrum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#stationary-stochastic-process"><span class="toc-text">4. Stationary Stochastic Process</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#power-spectrum-estimation"><span class="toc-text">5. Power Spectrum Estimation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#some-comments"><span class="toc-text">6. Some Comments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for-more-information"><span class="toc-text">For more information</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/academic-practice/" title="academic practice">academic practice<sup>1</sup></a></li>
		
			<li><a href="/categories/academic-theory/" title="academic theory">academic theory<sup>4</sup></a></li>
		
			<li><a href="/categories/others/" title="others">others<sup>2</sup></a></li>
		
			<li><a href="/categories/technique/" title="technique">technique<sup>2</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			<li><a href="/tags/Fourier-transform/" title="Fourier transform">Fourier transform<sup>3</sup></a></li>
		
			<li><a href="/tags/Battle-City/" title="Battle City">Battle City<sup>1</sup></a></li>
		
			<li><a href="/tags/visual-object-tracking/" title="visual object tracking">visual object tracking<sup>1</sup></a></li>
		
			<li><a href="/tags/wordpress/" title="wordpress">wordpress<sup>1</sup></a></li>
		
			<li><a href="/tags/kernel-method/" title="kernel method">kernel method<sup>1</sup></a></li>
		
			<li><a href="/tags/function-basis/" title="function basis">function basis<sup>2</sup></a></li>
		
			<li><a href="/tags/Bayesian-filter/" title="Bayesian filter">Bayesian filter<sup>1</sup></a></li>
		
			<li><a href="/tags/state-space-model/" title="state-space model">state-space model<sup>1</sup></a></li>
		
			<li><a href="/tags/power-spectral/" title="power spectral">power spectral<sup>1</sup></a></li>
		
			<li><a href="/tags/HDFS/" title="HDFS">HDFS<sup>1</sup></a></li>
		
			<li><a href="/tags/big-data/" title="big data">big data<sup>1</sup></a></li>
		
			<li><a href="/tags/Hadoop/" title="Hadoop">Hadoop<sup>1</sup></a></li>
		
			<li><a href="/tags/IERA/" title="IERA">IERA<sup>1</sup></a></li>
		
			<li><a href="/tags/ARMA/" title="ARMA">ARMA<sup>1</sup></a></li>
		
			<li><a href="/tags/periodogram/" title="periodogram">periodogram<sup>1</sup></a></li>
		
			<li><a href="/tags/particle-filter/" title="particle filter">particle filter<sup>1</sup></a></li>
		
			<li><a href="/tags/MapReduce/" title="MapReduce">MapReduce<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://kaibo.ie.wisc.edu" target="_blank" title="Prof. Liu, Kaibo">Prof. Liu, Kaibo</a>
            
          </li>
        
          <li>
            
            	<a href="http://iera.name" target="_blank" title="Industrial Engineering Era">IERA</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.xueningzhu.com/" target="_blank" title="Zhu, Xuening">Zhu, Xuening</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Pacman">Jacman</a> © 2015 
		
		<a href="http://songcy.net" target="_blank" title="Song, Changyue">Song, Changyue</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"songcy"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 


<script type="text/javascript">

var disqus_shortname = 'songcy';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/images/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

  <!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>
